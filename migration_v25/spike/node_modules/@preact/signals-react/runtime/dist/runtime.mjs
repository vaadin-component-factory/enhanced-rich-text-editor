import{Signal as n,signal as t,computed as e,effect as o}from"@preact/signals-core";import{version as i,useRef as r,useMemo as f,useEffect as u,useLayoutEffect as s}from"react";import{useSyncExternalStore as c}from"use-sync-external-store/shim/index.js";const[l]=i.split(".").map(Number),a=[],d=Symbol.for(l>=19?"react.transitional.element":"react.element"),p="undefined"!=typeof window&&!!window.__PREACT_SIGNALS_DEVTOOLS__;function m(t){if("function"!=typeof t)return t;else return function(e,o,...i){if("string"==typeof e&&o)for(let t in o){let e=o[t];if("children"!==t&&e instanceof n)o[t]=e.value}return t.call(t,e,o,...i)}}const b=Symbol.dispose||Symbol.for("Symbol.dispose");let y;function g(n,t){const e=t.effect.S();y=t;return h.bind(t,n,e)}function h(n,t){t();y=n}const v=()=>{},w={o:0,effect:{s:void 0,c(){},S:()=>v,d(){}},subscribe:()=>v,getSnapshot:()=>0,S(){},f(){},[b](){}},_=Promise.prototype.then.bind(Promise.resolve());let S;function x(){if(!S)S=_(j)}function j(){var n;S=void 0;null==(n=y)||n.f()}const P="undefined"!=typeof window?s:u;function $(n=0,t){x();const e=r();if(null==e.current)if("undefined"==typeof window)e.current=w;else e.current=function(n,t){let e,i,r,f=0,u=o(function(){e=this},{name:t||"Component"});e.c=function(){f=f+1|0;if(p){var n;null==(n=e.y)||n.call(e)}if(r)r()};return{o:n,effect:e,subscribe(n){r=n;return function(){f=f+1|0;r=void 0;u()}},getSnapshot:()=>f,S(){if(null==y){i=g(void 0,this);return}const n=y.o,t=this.o;if(0==n&&0==t||0==n&&1==t){y.f();i=g(void 0,this)}else if(1==n&&0==t||2==n&&0==t);else i=g(y,this)},f(){const n=i;i=void 0;null==n||n()},[b](){this.f()}}}(n,t);const i=e.current;c(i.subscribe,i.getSnapshot,i.getSnapshot);i.S();if(0===n)P(j);return i}Object.defineProperties(n.prototype,{$$typeof:{configurable:!0,value:d},type:{configurable:!0,value:function({data:n}){const t=$(1);try{return n.value}finally{t.f()}}},props:{configurable:!0,get(){return{data:this}}},ref:{configurable:!0,value:null}});function k(n,t){return $(n,t)}function useSignal(n,e){return f(()=>t(n,e),a)}function useComputed(n,t){const o=r(n);o.current=n;return f(()=>e(()=>o.current(),t),a)}function useSignalEffect(n,t){const e=r(n);e.current=n;u(()=>o(function(){return e.current()},t),a)}export{$ as _useSignalsImplementation,x as ensureFinalCleanup,useComputed,useSignal,useSignalEffect,k as useSignals,m as wrapJsx};//# sourceMappingURL=runtime.mjs.map
