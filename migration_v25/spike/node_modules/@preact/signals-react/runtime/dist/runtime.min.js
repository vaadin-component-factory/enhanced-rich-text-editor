!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@preact/signals-core"),require("react"),require("use-sync-external-store/shim/index.js")):"function"==typeof define&&define.amd?define(["exports","@preact/signals-core","react","use-sync-external-store/shim/index.js"],e):e((n||self).reactSignalsRuntime={},n.preactSignalsCore,n.react,n.index_js)}(this,function(n,e,t,i){var r,o=t.version.split(".").map(Number)[0],u=[],f=Symbol.for(o>=19?"react.transitional.element":"react.element"),c="undefined"!=typeof window&&!!window.__PREACT_SIGNALS_DEVTOOLS__,s=Symbol.dispose||Symbol.for("Symbol.dispose");function a(n,e){var t=e.effect.S();r=e;return l.bind(e,n,t)}function l(n,e){e();r=n}var d,v,p=function(){},y=((d={o:0,effect:{s:void 0,c:function(){},S:function(){return p},d:function(){}},subscribe:function(){return p},getSnapshot:function(){return 0},S:function(){},f:function(){}})[s]=function(){},d),b=Promise.prototype.then.bind(Promise.resolve());function h(){if(!v)v=b(g)}function g(){var n;v=void 0;null==(n=r)||n.f()}var m="undefined"!=typeof window?t.useLayoutEffect:t.useEffect;function w(n,o){if(void 0===n)n=0;h();var u=t.useRef();if(null==u.current)if("undefined"==typeof window)u.current=y;else u.current=function(n,t){var i,o,u,f,l=0,d=e.effect(function(){o=this},{name:t||"Component"});o.c=function(){l=l+1|0;if(c){var n;null==(n=o.y)||n.call(o)}if(f)f()};return(i={o:n,effect:o,subscribe:function(n){f=n;return function(){l=l+1|0;f=void 0;d()}},getSnapshot:function(){return l},S:function(){if(null!=r){var n=r.o,e=this.o;if(0==n&&0==e||0==n&&1==e){r.f();u=a(void 0,this)}else if(1==n&&0==e||2==n&&0==e);else u=a(r,this)}else u=a(void 0,this)},f:function(){var n=u;u=void 0;null==n||n()}})[s]=function(){this.f()},i}(n,o);var f=u.current;i.useSyncExternalStore(f.subscribe,f.getSnapshot,f.getSnapshot);f.S();if(0===n)m(g);return f}Object.defineProperties(e.Signal.prototype,{$$typeof:{configurable:!0,value:f},type:{configurable:!0,value:function(n){var e=n.data,t=w(1);try{return e.value}finally{t.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});n.u=w;n.ensureFinalCleanup=h;n.useComputed=function(n,i){var r=t.useRef(n);r.current=n;return t.useMemo(function(){return e.computed(function(){return r.current()},i)},u)};n.useSignal=function(n,i){return t.useMemo(function(){return e.signal(n,i)},u)};n.useSignalEffect=function(n,i){var r=t.useRef(n);r.current=n;t.useEffect(function(){return e.effect(function(){return r.current()},i)},u)};n.useSignals=function(n,e){return w(n,e)};n.wrapJsx=function(n){if("function"!=typeof n)return n;else return function(t,i){if("string"==typeof t&&i)for(var r in i){var o=i[r];if("children"!==r&&o instanceof e.Signal)i[r]=o.value}return n.call.apply(n,[n,t,i].concat([].slice.call(arguments,2)))}}});//# sourceMappingURL=runtime.min.js.map
