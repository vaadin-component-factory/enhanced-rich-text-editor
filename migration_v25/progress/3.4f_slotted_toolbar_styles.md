# Phase 3.4f: Slotted Toolbar Button Styles

**Status:** NOT STARTED
**Type:** Bugfix / Regression
**Priority:** HIGH — Affects custom toolbar buttons
**Created:** 2026-02-21

---

## Scope

Add missing `::slotted` CSS styles for custom toolbar buttons that are inserted via slots. These styles existed in V24 but are missing in V25, causing custom buttons to have no hover effects, spacing, or proper sizing.

---

## Background

### V24 Implementation

V24 had comprehensive `::slotted` styles in `vcf-enhanced-rich-text-editor-toolbar-styles.js`:

```css
::slotted([part~="toolbar-button"]) {
  width: auto;
  height: var(--lumo-size-m);
  border-radius: var(--lumo-border-radius);
  color: var(--lumo-contrast-80pct);
  margin: 2px 1px;
  cursor: default;
  transition: background-color 100ms, color 100ms;
  padding: 0 var(--lumo-space-s);
}

::slotted([part~="toolbar-button"]:hover) {
  background-color: var(--lumo-contrast-5pct);
  color: var(--lumo-contrast);
  box-shadow: none;
}

[part~="toolbar-button"]:hover,
::slotted([part~="toolbar-button"]:hover) {
  outline: none;
}

[part~="toolbar-button"]::before,
::slotted([part~="toolbar-button"]::before) {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
```

Also styles for special icons:
```css
[part~="toolbar-button-align-justify-icon"],
[part~="toolbar-button-align-left-icon"],
[part~="toolbar-button-align-center-icon"],
[part~="toolbar-button-align-right-icon"],
[part~="toolbar-button-deindent-icon"],
[part~="toolbar-button-indent-icon"],
[part~="toolbar-button-whitespace-icon"],
[part~="toolbar-button-readonly-icon"],
[part~="toolbar-button-vaadin-icon"]{
  --rte-extra-icons-stroke-color: var(--lumo-contrast-60pct);
}

[part~="toolbar-button"][part~="toolbar-button-placeholder-display"] {
  width: auto;
  min-width: var(--lumo-size-l);
  padding: 0 var(--lumo-space-xs);
  font-size: 0.875em;
}
```

### V25 Implementation

**Missing:** No `::slotted` styles in `static get styles()` method in `vcf-enhanced-rich-text-editor.js`.

---

## Tasks

### 1. Add Slotted Styles to `static get styles()`

Add the missing `::slotted` CSS to the Lit `css` template literal in the `static get styles()` method:

- [ ] Base button styles (size, padding, colors, transitions)
- [ ] Hover states
- [ ] Icon positioning (`::before` pseudo-element)
- [ ] Special icon stroke colors (align, indent, whitespace, readonly, vaadin-icon)
- [ ] Placeholder display button styles

### 2. Verify with Existing Test Views

Use existing test views that add custom toolbar buttons to verify the styles:

- [ ] `ErteToolbarTestView` — has custom buttons via slots
- [ ] Check visual appearance matches V24 (hover, spacing, sizing)
- [ ] Verify in Playwright tests if needed

---

## Testing Strategy

- **Manual:** Start demo, navigate to toolbar test view, verify custom button appearance
- **Playwright:** Existing `toolbar.spec.ts` tests should pass without visual regressions

---

## Definition of Done

- [ ] `::slotted` styles added to `static get styles()`
- [ ] Custom toolbar buttons have correct sizing, spacing, hover effects
- [ ] All existing Playwright tests pass
- [ ] Visual comparison with V24 shows no regressions
- [ ] Progress file updated to COMPLETE
- [ ] Commit created: "Add missing slotted toolbar button styles (Phase 3.4f)"
