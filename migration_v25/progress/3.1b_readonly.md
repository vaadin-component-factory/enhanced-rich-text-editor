# Phase 3.1b: Readonly Sections (Feature 4)

## Status: NOT STARTED

## Feature Summary
Inline `<span class="ql-readonly" contenteditable="false">` wrapping selected text.
Delete protection via text-change handler. Toolbar toggle button. Gray background styling.

## Dependencies
- Phase 3.1a (Custom Slots) â€” toolbar button injection

## Note: Sanitizer Foundation
This phase sets up the **sanitizer override structure** in `RteExtensionBase` (lift `sanitize()` to
protected, override with ERTE class whitelist). Each subsequent feature phase (3.1c, 3.1e, 3.1f, ...) adds
its own classes to the whitelist. Phase 3.3c handles security hardening only.

## Key References
- USE_CASE_ANALYSIS.md Feature 4
- Spike Item 13 (setReadOnly observer works on extended component)
- V24 source: `blots.js` (ReadOnlyBlot), toolbar handler, text-change protection

## Acceptance Criteria
- [ ] ReadOnlyBlot registered (Inline, `<span class="ql-readonly" contenteditable="false">`)
- [ ] Toolbar toggle button applies/removes readonly format
- [ ] Delete protection: text-change handler reverts if readonly blot count decreases
- [ ] Sanitizer whitelists `ql-readonly` class and `contenteditable="false"`
- [ ] Cannot type/paste inside readonly sections
- [ ] Playwright tests
