# Phase 3.4d: Fix focus() Method

## Status: NOT STARTED

## Issue Summary

The `focus()` method on `EnhancedRichTextEditor` does not reliably give focus to the editor.

**Failing test:** `tests/erte/features.spec.ts:716` - "focus() method gives focus to the editor"

**Error:**
```
expect(hasFocusAfter).toBe(true);
Expected: true
Received: false
```

## Root Cause

The test calls `editor.focus()` and then checks if the editor has focus using `page.evaluate()` to check `document.activeElement`. The focus is not being set correctly.

**Potential causes:**
- Focus needs to target the `.ql-editor` element inside shadow DOM, not the host element
- Timing issue - focus event might not have propagated yet
- Browser security/focus restrictions in test environment

## Investigation Steps

1. Check what `focus()` method does in `EnhancedRichTextEditor.java`
2. Check if RTE 2 base class has a `focus()` method
3. Verify focus target - should be `.ql-editor` or `this._editor.root`
4. Check if focus needs to be triggered on Quill instance (`this._editor.focus()`)
5. Test manually in browser to confirm the method works outside of Playwright

## Acceptance Criteria

- [ ] `focus()` method reliably gives focus to the editor
- [ ] Test `features.spec.ts:716` passes
- [ ] Focus is visible (cursor appears in editor)
- [ ] Subsequent keyboard input goes to the editor

## Notes

- This is a pre-existing bug, not introduced by any Phase 3 work
- Test has been failing since early migration phases
- Low priority - focus() method is rarely used in typical applications
- Most focus operations happen via user clicks, not programmatic API calls
