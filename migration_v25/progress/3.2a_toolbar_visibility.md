# Phase 3.2a: Toolbar Button Visibility (Feature 9)

## Status: COMPLETE

## Feature Summary
Individual toolbar buttons can be shown/hidden via `setToolbarButtonsVisibility(Map)`.
Groups auto-hide when all buttons hidden. `ToolbarButton` enum (30 values).

## Dependencies
- Phase 3.1a (Custom Slots) — toolbar infrastructure

## Implementation

### Java (`EnhancedRichTextEditor.java`)
- **`ToolbarButton` enum** — 30 values (25 standard RTE 2 + 5 ERTE-specific)
  - Each value has explicit `partSuffix` mapping (e.g., `BOLD("bold")`, `CODE_BLOCK("code-block")`)
  - `getPartSuffix()` returns suffix, `getPartName()` returns full `toolbar-button-<suffix>`
  - ERTE buttons: `READONLY`, `PLACEHOLDER`, `PLACEHOLDER_APPEARANCE`, `WHITESPACE`, `ALIGN_JUSTIFY`
- **`setToolbarButtonsVisibility(Map<ToolbarButton, Boolean>)`** — sends Jackson `ObjectNode` via `executeJs`
- **`getToolbarButtonsVisibility()`** — returns stored map
- Null map resets all buttons to visible

### JS (`vcf-enhanced-rich-text-editor.js`)
- **`setToolbarButtonsVisibility(visMap)`** — stores map, calls `_applyToolbarButtonsVisibility()`
- **`_applyToolbarButtonsVisibility()`** — resets all buttons to visible, then hides specified ones via `style.display = 'none'`. Auto-hides groups where ALL buttons are hidden.

### Test View (`ErteToolbarTestView.java`)
- Added `List.of(new Placeholder("Test"))` to enable placeholder button
- 4 new control buttons: `hide-buttons`, `hide-erte-buttons`, `show-buttons`, `hide-block-group`

### Tests (`toolbar.spec.ts`)
- Enabled 3 formerly fixme tests + 1 new group auto-hide test
- Changed ERTE button test from `whitespace` to `placeholder` (whitespace not yet implemented)

## Test Results
- **147 pass, 19 fixme** across full ERTE suite (up from 143 pass, 22 fixme)
- All 4 new/enabled visibility tests pass

## Acceptance Criteria
- [x] `ToolbarButton` enum with all 30 values (standard + ERTE-specific)
- [x] `setToolbarButtonsVisibility(Map<ToolbarButton, Boolean>)` Java API
- [x] Groups auto-hide when all child buttons hidden
- [x] CSS `display: none` applied per button via JS bridge
- [x] Playwright tests (4 tests: hide standard, hide ERTE, show all, group auto-hide)
