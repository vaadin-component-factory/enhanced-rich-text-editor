# Phase 3.4k: Custom Properties for ERTE Styles

**Status:** NOT STARTED
**Type:** Theming API Enhancement
**Priority:** MEDIUM — Improves user customization

## Objective

Create dedicated CSS custom properties (with `--vaadin-erte-*` prefix) for all ERTE-specific styles that currently use generic `--vaadin-*` properties. This follows Vaadin component conventions and allows users to style ERTE independently from other Vaadin components.

## Current Situation

ERTE currently uses generic Vaadin properties directly for its own styles. Example from readonly format:

```css
.ql-readonly {
  color: var(--vaadin-text-color-secondary);
  background-color: var(--vaadin-background-container);
  outline: 1px solid var(--vaadin-border-color);
  border-radius: var(--vaadin-radius-s);
}
```

**Problem:**
- Not ERTE-specific — changes affect all Vaadin components using these properties
- No way to style ERTE independently
- Not following Vaadin component best practices (components should define their own properties)

## Requirements

### 1. Create Custom Properties

For all ERTE-specific styles, create custom properties with prefix `--vaadin-erte-*`:

**Naming convention:**
- Format: `--vaadin-erte-{feature}-{element}-{property}`
- Examples:
  - `--vaadin-erte-format-readonly-color`
  - `--vaadin-erte-format-readonly-background`
  - `--vaadin-erte-format-readonly-border-color`
  - `--vaadin-erte-format-readonly-border-radius`

**Default values:**
- Custom properties should default to existing `--vaadin-*` properties for backward compatibility
- Example: `--vaadin-erte-format-readonly-color: var(--vaadin-text-color-secondary);`

### 2. Update All ERTE Styles

Replace direct usage of `--vaadin-*` with `--vaadin-erte-*` in:
- Readonly format styles (`.ql-readonly`)
- Placeholder styles (`.ql-placeholder`)
- Tab blot styles (`.ql-tab`, `.ql-tab-guard`)
- Whitespace indicator styles (`.ql-nbsp-indicator`, `.ql-space-indicator`, etc.)
- Toolbar custom component styles
- Ruler styles
- Any other ERTE-specific styles

### 3. Define Properties in Component

Custom properties should be defined in the component's CSS (likely in `vcf-enhanced-rich-text-editor.js` static styles or in a separate Lumo theme file).

### 4. Complete Documentation

After implementation, this progress file **MUST** contain:
- **COMPLETE list of ALL ERTE custom properties**
- **Short description for each property**
- **Default value for each property**
- **Example usage** (how users can override them)

## Scope

### In Scope
- All ERTE-specific visual styles that currently use `--vaadin-*` properties
- All feature-specific styles (readonly, placeholders, tabs, whitespace, etc.)
- Toolbar customization properties
- Ruler customization properties

### Out of Scope
- RTE 2 base styles (those belong to Vaadin's RTE component)
- Styles that should genuinely use generic Vaadin properties (e.g., button hover state that should match Vaadin buttons)

## Implementation Steps

1. **Audit existing styles** — Find all places where ERTE uses `--vaadin-*` properties for ERTE-specific features
2. **Define custom properties** — Create `--vaadin-erte-*` properties with defaults
3. **Update styles** — Replace direct `--vaadin-*` usage with `--vaadin-erte-*`
4. **Test visual consistency** — Ensure default appearance is unchanged
5. **Document all properties** — Update this file with complete property list
6. **Update user documentation** — Add theming/styling guide showing how to use custom properties

## Success Criteria

- [ ] All ERTE-specific styles use `--vaadin-erte-*` custom properties
- [ ] Default visual appearance is unchanged (properties default to current values)
- [ ] Users can override ERTE styles independently from other Vaadin components
- [ ] This progress file contains complete, documented list of all custom properties
- [ ] User documentation includes theming guide with examples

## Custom Properties List

*To be filled after implementation.*

This section will contain the complete list of all `--vaadin-erte-*` custom properties with:
- Property name
- Description
- Default value
- Affected elements/features

**Format:**
```
### --vaadin-erte-{name}
**Description:** {what it controls}
**Default:** `{default value}`
**Affects:** {which elements/features}
**Example:**
```css
vcf-enhanced-rich-text-editor {
  --vaadin-erte-{name}: {custom value};
}
```
```

## Notes

- **Theme scope:** ERTE 6.0.0 supports Lumo theme only. Custom properties will be designed for Lumo-based theming.
- **Future multi-theme support (Phase 5.1):**
  - When Aura theme support is added in Phase 5.1, all custom properties defined here will be audited for Aura compatibility
  - Properties may need theme-specific overrides via `:host([theme~="aura"])` selectors
  - Default values should use generic Vaadin tokens (`--vaadin-*`) where possible for cross-theme compatibility
  - Phase 5.1 will review and update this property list with Aura-specific notes
- **Implementation location:** Properties should be defined in the component's `static get styles()` in `vcf-enhanced-rich-text-editor.js`.
- **Backward compatibility:** All custom properties must default to current values to ensure existing applications work unchanged.

## Related Files

- `enhanced-rich-text-editor-v25/src/main/resources/META-INF/resources/frontend/vcf-enhanced-rich-text-editor.js`
- `enhanced-rich-text-editor-v25/src/main/resources/META-INF/resources/frontend/styles/` (if theme files created)
- User documentation (to be updated with theming guide)
